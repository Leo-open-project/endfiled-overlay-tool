<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Overlay</title>
    <style>
        html,
        body {
            margin: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            overflow: hidden;
        }

        #stage {
            position: relative;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }

        body.unlocked #stage {
            border: 2px dashed rgba(0, 168, 255, 0.6);
            -webkit-app-region: drag;
        }

        #hud {
            -webkit-app-region: no-drag;
        }

        #img {
            position: absolute;
            left: 100px;
            top: 100px;
            transform-origin: center center;
            user-select: none;
            -webkit-user-drag: none;
            pointer-events: auto;
            -webkit-app-region: no-drag;
        }

        #hud {
            position: fixed;
            left: 12px;
            top: 12px;
            background: rgba(0, 0, 0, 0.55);
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-family: sans-serif;
            pointer-events: auto;
        }

        #hud input {
            width: 220px;
        }

        .row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 6px 0;
        }

        .badge {
            opacity: 0.9;
            font-size: 12px;
        }

        #grid {
            display: none;
            position: fixed;
            inset: 0;
            pointer-events: none;
        }

        #grid.visible {
            display: block;
        }

        #hud input[type="checkbox"],
        #hud input[type="color"] {
            width: auto;
        }

        .rot-btn {
            display: none;
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 20px;
            cursor: pointer;
            pointer-events: auto;
            -webkit-app-region: no-drag;
        }

        .rot-left { left: 12px; }
        .rot-right { right: 12px; }

        body.unlocked .rot-btn {
            display: block;
        }
    </style>
</head>

<body>
    <div id="stage">
        <img id="img" />
        <div id="hud">
            <div class="row">
                <button id="btnLoad">이미지 불러오기</button>
                <button id="btnQuit" style="background:#c44; color:#fff; border:none; border-radius:4px; padding:2px 10px; cursor:pointer;">종료</button>
                <label class="badge"><input type="checkbox" id="chkLocked" /> 잠금(클릭통과)</label>
                <label class="badge"><input type="checkbox" id="chkGrid" /> 격자</label>
            </div>
            <div class="row">
                <span>회전: </span><span id="rotVal">0°</span>
            </div>
            <div class="row">
                <label class="badge"><input type="checkbox" id="chkChroma" /> 크로마 키</label>
                <input type="color" id="chromaColor" value="#00ff00" />
            </div>
            <div class="row" id="chromaRow" style="display:none">
                <span>허용범위</span>
                <input id="chromaTol" type="range" min="0" max="150" value="50" />
                <span id="chromaTolVal">50</span>
            </div>
            <div class="row">
                <span>투명도</span>
                <input id="opacity" type="range" min="0" max="100" value="60" />
                <span id="opacityVal">60%</span>
            </div>
            <div class="badge">
                Ctrl+F11: 표시/숨김 · Ctrl+F12: 잠금 토글 · Ctrl+/-: 확대/축소 · 이미지 드래그: 이동
            </div>
        </div>
        <button id="btnRotL" class="rot-btn rot-left">↶</button>
        <button id="btnRotR" class="rot-btn rot-right">↷</button>
        <svg id="grid" width="100%" height="100%">
            <defs>
                <pattern id="gridPat" width="48" height="48" patternUnits="userSpaceOnUse">
                    <line x1="0" y1="0" x2="0" y2="48" stroke="rgba(200,50,50,0.25)" stroke-width="5" stroke-dasharray="6,4" />
                    <line x1="0" y1="0" x2="48" y2="0" stroke="rgba(200,50,50,0.25)" stroke-width="5" stroke-dasharray="6,4" />
                    <circle cx="0" cy="0" r="4" fill="rgba(200,50,50,0.5)" />
                    <circle cx="48" cy="0" r="4" fill="rgba(200,50,50,0.5)" />
                    <circle cx="0" cy="48" r="4" fill="rgba(200,50,50,0.5)" />
                    <circle cx="48" cy="48" r="4" fill="rgba(200,50,50,0.5)" />
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#gridPat)" />
        </svg>
        <input id="file" type="file" accept="image/*" style="display:none" />
    </div>

    <script src="renderer.js"></script>
</body>

</html>